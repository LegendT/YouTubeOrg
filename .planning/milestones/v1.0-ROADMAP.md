# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-02-08
**Phases:** 1-12
**Total Plans:** 65

## Overview

This roadmap transforms 5,523 videos across 87 fragmented playlists into an organised, findable reference library. The journey begins with YouTube API integration and data caching, progresses through ML-powered categorisation of 4,000 Watch Later videos, and culminates in safe, quota-aware syncing back to YouTube. Each phase builds foundational capabilities that enable the next, with safety mechanisms and performance optimisations integrated throughout to handle scale (4,000+ videos) and constraints (10,000 API units/day).

## Phases

### Phase 1: Foundation & API Integration

**Goal**: Application can authenticate with YouTube, fetch all playlists and videos, cache data locally, and track API quota usage without exhausting daily limits.

**Depends on**: Nothing (first phase)

**Requirements**: AUTH-01, AUTH-02, AUTH-03, AUTH-04, DATA-01, DATA-02, DATA-03, DATA-04, DATA-05, DATA-06, UI-01

**Plans**: 5 plans

Plans:
- [x] 01-01-PLAN.md — Next.js 15 setup, dependencies, and database schema
- [x] 01-02-PLAN.md — NextAuth OAuth with token refresh
- [x] 01-03-PLAN.md — Rate limiter, ETag caching, and quota tracking
- [x] 01-04-PLAN.md — Playlist/video sync with resume capability
- [x] 01-05-PLAN.md — Dashboard UI with authentication flow

**Completed:** 2026-02-05

---

### Phase 2: Playlist Analysis & Consolidation

**Goal**: System analyses existing 87 playlists for overlap and duplication, proposes intelligent consolidation to ~25-35 categories, and user can approve or adjust the structure via a comprehensive split-panel analysis interface with keyboard navigation, batch operations, and guided split wizard.

**Depends on**: Phase 1 (requires cached playlist data)

**Requirements**: CAT-05, CAT-06, CAT-07, CAT-08, CAT-09, SAFE-04

**Plans**: 11 plans

Plans:
- [x] 02-01-PLAN.md — Analysis backend (duplicate detection, clustering, validation)
- [x] 02-02-PLAN.md — Server actions for proposal workflow
- [x] 02-03-PLAN.md — Basic consolidation UI with approve/reject
- [x] 02-05-PLAN.md — Backend fixes: fast-dice-coefficient, group(k), confidence scores, algorithm modes, sessions
- [x] 02-06-PLAN.md — Enhanced server actions: split, create, resolve duplicates, batch, staleness
- [x] 02-07-PLAN.md — Resizable split-panel layout, summary card, sortable category list
- [x] 02-08-PLAN.md — Category detail panel with paginated video list, confidence/validation badges
- [x] 02-09-PLAN.md — Duplicate resolver with bulk actions, batch approve/reject toolbar
- [x] 02-10-PLAN.md — Split wizard, manual adjustment buttons, create custom category
- [x] 02-11-PLAN.md — Progress tracking, keyboard navigation, loading states, staleness detection
- [x] 02-12-PLAN.md — Final review screen, full integration, end-to-end verification

**Completed:** 2026-02-06

---

### Phase 3: Category Management

**Goal**: User has full CRUD control over category structure with ability to create, rename, delete, and manually merge categories.

**Depends on**: Phase 2 (requires approved category structure)

**Requirements**: CAT-01, CAT-02, CAT-03, CAT-04, CAT-10

**Plans**: 6 plans

Plans:
- [x] 03-01-PLAN.md — Schema (categories + categoryVideos tables), types, and proposal-to-category migration
- [x] 03-02-PLAN.md — CRUD server actions (list, create, rename, delete, merge, undo, video search/assign)
- [x] 03-03-PLAN.md — Undo stack hook, undo banner, rename dialog, delete dialog
- [x] 03-04-PLAN.md — Merge categories dialog, full-screen video assignment dialog
- [x] 03-05-PLAN.md — Dashboard integration: management mode, category list/detail extensions, wiring
- [x] 03-06-PLAN.md — Final polish, new-category button, end-to-end verification

**Completed:** 2026-02-06

---

### Phase 4: Video Display & Organisation

**Goal**: User can browse, search, filter, and manually organise videos across categories with performant UI handling 4,000+ items without freezing.

**Depends on**: Phase 3 (requires category structure)

**Requirements**: VID-01, VID-02, VID-03, VID-04, VID-05, VID-06, VID-07, UI-02, UI-03, UI-05, UI-06

**Plans**: 5 plans

Plans:
- [x] 04-01-PLAN.md — Dependencies, types, and shared utilities (format, colours, thumbnails)
- [x] 04-02-PLAN.md — Server actions (getVideosForCategory) and category sidebar
- [x] 04-03-PLAN.md — Video card, virtualised grid, and toolbar (search/sort/select)
- [x] 04-04-PLAN.md — Page orchestration, move/copy dialog, undo wiring
- [x] 04-05-PLAN.md — End-to-end verification and polish

**Completed:** 2026-02-06

---

### Phase 5: ML Categorisation Engine

**Goal**: System auto-categorises Watch Later videos using client-side ML (Transformers.js), assigns confidence scores, caches embeddings, and processes in batches for performance.

**Depends on**: Phase 3 (requires target category structure)

**Requirements**: ML-01, ML-02, ML-03, ML-04

**Plans**: 4 plans

Plans:
- [x] 05-01-PLAN.md — ML foundation (IndexedDB cache, Web Worker, cosine similarity)
- [x] 05-02-PLAN.md — Database schema and batch categorisation engine
- [x] 05-03-PLAN.md — Server actions and UI components (trigger + progress)
- [x] 05-04-PLAN.md — Integration, navigation, and end-to-end verification

**Completed:** 2026-02-07

---

### Phase 6: Review & Approval Interface

**Goal**: User can efficiently review ML categorisation suggestions, accept/reject with keyboard shortcuts, manually recategorise, and focus on low-confidence items.

**Depends on**: Phase 5 (requires ML categorisations)

**Requirements**: ML-05, ML-06, ML-07, ML-08, UI-07, UI-08, UI-09

**Plans**: 5 plans

Plans:
- [x] 06-01-PLAN.md — Server actions for review workflow (accept/reject/recategorise)
- [x] 06-02-PLAN.md — Review grid with confidence badges and progress display
- [x] 06-03-PLAN.md — Review modal with keyboard shortcuts and auto-advance
- [x] 06-04-PLAN.md — Basic page orchestration with grid/modal integration and Tab/Enter navigation
- [x] 06-05-PLAN.md — Optimistic updates, accept/reject handlers, filters, category picker, and navbar link

**Completed:** 2026-02-07

---

### Phase 7: Safety & Archive System

**Goal**: System automatically archives playlist metadata before any destructive operation, supports undo/restore, and maintains immutable operation log.

**Depends on**: Phase 6 (setup before sync operations)

**Requirements**: SAFE-01, SAFE-02, SAFE-03, SAFE-05, SAFE-06

**Plans**: 4 plans

Plans:
- [x] 07-01-PLAN.md — Database schema (operationLog + backupSnapshots), types, and core backup/restore logic
- [x] 07-02-PLAN.md — Server actions (backup CRUD, operation log, pending changes) and download route handler
- [x] 07-03-PLAN.md — Safety dashboard UI page with backup list, operation log, pending changes, and navbar link
- [x] 07-04-PLAN.md — Wire pre-operation backups into destructive actions and end-to-end verification

**Completed:** 2026-02-07

---

### Phase 8: Batch Sync Operations

**Goal**: System syncs approved categorisations to YouTube with quota-aware batching, checkpoint/resume capability, multi-day strategy, and graceful failure handling.

**Depends on**: Phase 7 (requires safety mechanisms)

**Requirements**: SYNC-01, SYNC-02, SYNC-03, SYNC-04, SYNC-05, SYNC-06, SYNC-07, SYNC-08, SYNC-09, SYNC-10, SYNC-11, SYNC-12, UI-04

**Plans**: 4 plans

Plans:
- [x] 08-01-PLAN.md — Database schema (syncJobs, syncVideoOperations), types, YouTube write operations, OAuth scope upgrade
- [x] 08-02-PLAN.md — Sync engine state machine, stage executors, and preview computation
- [x] 08-03-PLAN.md — Server actions for sync control and /sync preview page
- [x] 08-04-PLAN.md — Sync progress display, completion report, navigation link, and end-to-end verification

**Completed:** 2026-02-07

---

### Phase 9: Auth Hardening

**Goal**: All pages and server actions validate authentication, redirecting to login on expired/missing tokens instead of showing errors.

**Depends on**: Phase 1 (auth infrastructure)

**Gap Closure**: Audit items #1, #2 (HIGH priority security)

**Plans**: 3 plans

Plans:
- [x] 09-01-PLAN.md — Create requireAuth() guard utility and auth infrastructure
- [x] 09-02-PLAN.md — Middleware + selective guards for analysis, categories, ml-categorisation
- [x] 09-03-PLAN.md — Selective guards for backup actions and full auth audit

**Completed:** 2026-02-08

---

### Phase 10: UI Polish & Code Quality

**Goal**: Replace alert() with toast notifications, replace window.confirm() with styled modal dialogs, fix TypeScript errors in ML worker, and sweep all user-facing strings and code identifiers for British English consistency.

**Depends on**: Phase 4 (alert usage), Phase 5 (TS errors)

**Gap Closure**: Audit items #3, #5; STATE.md pending todo #4

**Plans**: 3 plans

Plans:
- [x] 10-01-PLAN.md — Sonner toast setup, alert/confirm replacements, ML worker TS verification
- [x] 10-02-PLAN.md — DB table rename (ml_categorisations), data migration (Uncategorised), schema updates
- [x] 10-03-PLAN.md — Route/file renames, British English identifier/string sweep across all files

**Completed:** 2026-02-08

---

### Phase 11: UX Refinements

**Goal**: Improve analysis workflow UX — approval toggle behaviour, checkbox semantics, and cancel affordance in Final Review dialog.

**Depends on**: Phase 2 (analysis UI)

**Gap Closure**: UX issues identified during v1 development

**Plans**: 3 plans

Plans:
- [x] 11-01-PLAN.md — Reset button + server action for approval toggle behaviour
- [x] 11-02-PLAN.md — Visual separation of checkboxes from approval state, batch reset in toolbar
- [x] 11-03-PLAN.md — Cancel button in Final Review dialog

**Completed:** 2026-02-08

---

### Phase 12: UX Audit

**Goal**: Comprehensive UX review across all pages to align with best-in-class standards. Evaluate layout, interactions, feedback patterns, empty states, loading states, and overall polish across every user-facing page.

**Depends on**: Phase 11 (all scoped UX fixes complete first)

**Plans**: 12 plans

Plans:
- [x] 12-01-PLAN.md — Foundation: Phosphor Icons, dark mode ThemeProvider, semantic tokens, EmptyState/Spinner components, UX audit document
- [x] 12-02-PLAN.md — Navigation overhaul + landing page (Phosphor icons, semantic colours, theme toggle, mobile)
- [x] 12-03-PLAN.md — Dashboard page (standardised layout, semantic colours, empty state)
- [x] 12-04-PLAN.md — Analysis core structure (dashboard, category list, detail, summary, batch ops)
- [x] 12-05-PLAN.md — Analysis dialogs (final review, split wizard, duplicate resolver, video assignment, merge/rename/delete)
- [x] 12-06-PLAN.md — Analysis utility components (badges, banners, loading, buttons, tables)
- [x] 12-07-PLAN.md — Videos page (grid, cards, sidebar, toolbar, move-copy dialog, empty states)
- [x] 12-08-PLAN.md — ML Categorisation + ML Review pages (all components, standardised layouts)
- [x] 12-09-PLAN.md — Safety + Sync pages (all components, standardised layouts, status colours)
- [x] 12-10-PLAN.md — Accessibility pass (WCAG 2.2 focus, ARIA, headings) + button/form standardisation
- [x] 12-11-PLAN.md — Keyboard shortcuts overlay (? key) + shortcut standardisation
- [x] 12-12-PLAN.md — Responsive polish (mobile nav, grids, sidebar) + dark mode QA + visual verification

**Completed:** 2026-02-08

---

## Milestone Summary

**Key Decisions:**
- AI-first categorisation with user approval for trust (confirmed good)
- Client-side ML via Web Worker for browser API access (confirmed good)
- AGNES clustering with word-level Jaccard similarity for playlist consolidation
- Middleware-first auth (NextAuth v5) for comprehensive route protection
- Dark mode with oklch colour system and Phosphor Icons for consistent design

**Issues Resolved:**
- Auth gaps in 4 pages → Fixed in Phase 9 with middleware
- alert() error display → Replaced with Sonner toast in Phase 10
- TypeScript errors in ML worker → Fixed in Phase 10
- British English inconsistencies → Full sweep in Phase 10
- UX issues (approval toggle, checkbox semantics) → Fixed in Phase 11
- Accessibility and responsiveness → Comprehensive audit in Phase 12

**Issues Deferred:**
- SYNC-04 partial: YouTube deprecated Watch Later write API in 2020 — external constraint, not fixable
- Learning system (LEARN-01 through LEARN-04) → Deferred to v2
- Google Cloud OAuth verification → Required before production deployment with >100 users

**Technical Debt Incurred:**
- Bottleneck reservoir timezone assumes local deployment timezone
- Google Cloud OAuth in "Testing" mode
- Confidence threshold calibration may need revisiting with larger datasets

---

_For current project status, see .planning/MILESTONES.md_
