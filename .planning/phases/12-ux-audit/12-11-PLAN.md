---
phase: 12-ux-audit
plan: 11
type: execute
wave: 3
depends_on: ["12-02", "12-03", "12-04", "12-05", "12-06", "12-07", "12-08", "12-09"]
files_modified:
  - src/components/keyboard-shortcuts-overlay.tsx
  - src/components/analysis/analysis-dashboard.tsx
  - src/components/analysis/keyboard-nav.tsx
  - src/components/ml-review/review-page.tsx
  - src/components/ml-review/keyboard-hints.tsx
  - src/components/videos/video-browse-page.tsx
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Pressing ? opens a keyboard shortcuts overlay listing all available shortcuts"
    - "Keyboard shortcuts are consistent across pages (same keys for same actions)"
    - "Overlay shows shortcuts grouped by page/context"
    - "Overlay can be dismissed with Escape or clicking outside"
    - "Existing keyboard shortcuts in analysis and ml-review still work"
  artifacts:
    - path: "src/components/keyboard-shortcuts-overlay.tsx"
      provides: "Global keyboard shortcut help overlay activated by ? key"
      exports: ["KeyboardShortcutsOverlay"]
    - path: "src/app/layout.tsx"
      provides: "Layout renders KeyboardShortcutsOverlay globally"
      contains: "KeyboardShortcutsOverlay"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/components/keyboard-shortcuts-overlay.tsx"
      via: "Layout includes overlay component"
      pattern: "KeyboardShortcutsOverlay"
---

<objective>
Standardise keyboard shortcuts across all pages and create a ? keyboard shortcut help overlay.

Purpose: Keyboard-first interaction is a core Linear-inspired principle. A ? overlay makes shortcuts discoverable. Standardising shortcuts across pages reduces cognitive load.

Output: Global ? help overlay, standardised keyboard shortcut scheme, improved keyboard navigation hints.
</objective>

<execution_context>
@/Users/anthonygeorge/.claude/get-shit-done/workflows/execute-plan.md
@/Users/anthonygeorge/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-ux-audit/12-RESEARCH.md
@.planning/phases/12-ux-audit/12-01-SUMMARY.md
@src/components/analysis/keyboard-nav.tsx
@src/components/ml-review/keyboard-hints.tsx
@src/components/ml-review/review-page.tsx
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create global keyboard shortcuts overlay</name>
  <files>
    src/components/keyboard-shortcuts-overlay.tsx
    src/app/layout.tsx
  </files>
  <action>
    1. Create `src/components/keyboard-shortcuts-overlay.tsx`:
       - 'use client' component
       - Import `useHotkeys` from `react-hotkeys-hook` and `Dialog` from `@/components/ui/dialog`
       - Use `useState` to track open/closed state
       - Register `shift+/` (which is the `?` key) via `useHotkeys('shift+/', () => setOpen(true))` at the global level
       - Also register `Escape` to close (Dialog handles this, but explicit is clearer)
       - Render a Dialog (or raw modal) with:
         - Title: "Keyboard Shortcuts"
         - Content: grouped shortcut listings

       **Shortcut groups to display:**

       **Global:**
       | Key | Action |
       |-----|--------|
       | `?` | Show keyboard shortcuts |

       **Analysis Page:**
       | Key | Action |
       |-----|--------|
       | `j` / `Arrow Down` | Next category |
       | `k` / `Arrow Up` | Previous category |
       | `Enter` | Open selected category |

       **ML Review Page:**
       | Key | Action |
       |-----|--------|
       | `Tab` / `Shift+Tab` | Navigate review grid |
       | `Enter` | Open review modal |
       | `a` | Accept suggestion |
       | `r` | Reject suggestion |
       | `Arrow Left` / `Arrow Right` | Previous / Next in modal |

       **Videos Page:**
       | Key | Action |
       |-----|--------|
       | `Ctrl/Cmd + Z` | Undo last action |

       2. Style the overlay Linear-style:
          - Centred dialog, max-w-lg
          - Dark background overlay
          - Shortcut keys rendered in `<kbd>` elements: `bg-muted border border-border rounded px-1.5 py-0.5 text-xs font-mono text-muted-foreground`
          - Group headers: `text-sm font-semibold text-foreground`
          - Descriptions: `text-sm text-muted-foreground`
          - Use semantic colours throughout

    3. In `src/app/layout.tsx`:
       - Import and render `<KeyboardShortcutsOverlay />` inside the ThemeProvider, after Navigation
       - It must be a client component boundary — wrap in dynamic import if needed for SSR safety, or ensure it only uses client hooks
  </action>
  <verify>
    Run `npm run build`. Verify KeyboardShortcutsOverlay is rendered in layout.tsx. Verify the ? hotkey is registered.
  </verify>
  <done>
    Global ? keyboard shortcut overlay opens on Shift+/ (?) key press. Displays all shortcuts grouped by page context. Styled with semantic colours and kbd elements. Rendered in root layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Standardise existing keyboard shortcuts and update hints</name>
  <files>
    src/components/analysis/analysis-dashboard.tsx
    src/components/analysis/keyboard-nav.tsx
    src/components/ml-review/review-page.tsx
    src/components/ml-review/keyboard-hints.tsx
    src/components/videos/video-browse-page.tsx
  </files>
  <action>
    1. **Review existing keyboard shortcuts for conflicts:**
       - Analysis: j/k/Arrow navigation, Enter to select — these are fine
       - ML Review: Tab/Shift+Tab grid nav, Enter modal, a/r accept/reject, Left/Right modal nav — these are fine
       - Videos: Ctrl/Cmd+Z undo — this is fine
       - Check: no shortcut conflicts with the new global `?` shortcut
       - Ensure `?` is suppressed when a Dialog or input is focused (check `enableOnFormTags` and `enableOnContentEditable` options in useHotkeys)

    2. **Update keyboard-hints.tsx in ml-review:**
       - Replace hardcoded colours with semantic tokens (if not already done in Plan 08)
       - Update styling to use `<kbd>` elements consistent with the overlay
       - Kbd styling: `bg-muted border border-border rounded px-1.5 py-0.5 text-xs font-mono`
       - Ensure hints match what's shown in the ? overlay

    3. **Add subtle keyboard hint to pages that have shortcuts:**
       - Analysis page: small hint at bottom of category list or in the page footer: "Press ? for keyboard shortcuts"
       - ML Review page: the existing KeyboardHints component already shows this — update styling to be more subtle
       - Videos page: add a small hint near the toolbar

    4. **Ensure the ? shortcut doesn't fire when:**
       - User is typing in a search input
       - A Dialog is already open
       - A modal is active
       Use `useHotkeys` options: `{ enabled: true, enableOnFormTags: false }` or check for active element type

    5. **Standardise kbd element styling** across all components that render keyboard shortcuts:
       - Create a simple `Kbd` component or use consistent class string
       - Apply to: keyboard-hints.tsx, any inline shortcut hints
  </action>
  <verify>
    Run `npm run build`. Test that ? shortcut doesn't interfere with existing shortcuts (no conflicts). Verify keyboard-hints.tsx uses consistent kbd styling.
  </verify>
  <done>
    Existing keyboard shortcuts verified with no conflicts. ? suppressed during input/dialog focus. Kbd elements consistently styled across all shortcut hints. Subtle "Press ? for shortcuts" hints on pages with shortcuts.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. KeyboardShortcutsOverlay renders in layout.tsx
3. ? key opens the overlay (Shift+/)
4. Escape closes the overlay
5. Shortcuts are grouped by page context
6. ? doesn't fire in search inputs or dialogs
7. Existing shortcuts (j/k, a/r, Tab, Ctrl+Z) still work
8. Kbd elements styled consistently
</verification>

<success_criteria>
Global keyboard shortcut overlay activated by ? key, displaying all shortcuts grouped by page. Existing shortcuts standardised and verified conflict-free. Consistent kbd styling across all shortcut displays. ? suppressed during text input.
</success_criteria>

<output>
After completion, create `.planning/phases/12-ux-audit/12-11-SUMMARY.md`
</output>
