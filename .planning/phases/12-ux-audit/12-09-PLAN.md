---
phase: 12-ux-audit
plan: 09
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - src/app/safety/page.tsx
  - src/components/safety/safety-dashboard.tsx
  - src/components/safety/backup-list.tsx
  - src/components/safety/operation-log-table.tsx
  - src/components/safety/pending-changes.tsx
  - src/components/safety/confirm-dialog.tsx
  - src/app/sync/page.tsx
  - src/app/sync/sync-page-client.tsx
  - src/components/sync/sync-preview.tsx
  - src/components/sync/sync-progress.tsx
  - src/components/sync/sync-report.tsx
autonomous: true

must_haves:
  truths:
    - "Safety page uses semantic colours and standardised layout"
    - "Sync page uses semantic colours and standardised layout"
    - "All safety/sync components use Phosphor icons instead of Lucide"
    - "Operation log table uses semantic colours for action badges"
    - "Sync preview cards use semantic colours"
    - "Sync progress stages use semantic status colours"
    - "Both pages work correctly in dark mode"
  artifacts:
    - path: "src/app/safety/page.tsx"
      provides: "Safety page with standardised layout"
    - path: "src/app/sync/sync-page-client.tsx"
      provides: "Sync page client with semantic colours"
    - path: "src/components/sync/sync-progress.tsx"
      provides: "Sync progress with semantic stage colours"
  key_links: []
---

<objective>
Migrate the Safety and Sync pages with all their components to semantic colours, Phosphor icons, and standardised layouts.

Purpose: Safety and Sync are critical operational pages. They must be clear and readable in both light and dark modes, with consistent status colour coding.

Output: Both pages and all 11 components using semantic colours, Phosphor icons, standardised layouts, and dark mode support.
</objective>

<execution_context>
@/Users/anthonygeorge/.claude/get-shit-done/workflows/execute-plan.md
@/Users/anthonygeorge/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-ux-audit/12-RESEARCH.md
@.planning/phases/12-ux-audit/12-01-SUMMARY.md
@src/app/safety/page.tsx
@src/components/safety/safety-dashboard.tsx
@src/app/sync/page.tsx
@src/app/sync/sync-page-client.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Safety page and all safety components</name>
  <files>
    src/app/safety/page.tsx
    src/components/safety/safety-dashboard.tsx
    src/components/safety/backup-list.tsx
    src/components/safety/operation-log-table.tsx
    src/components/safety/pending-changes.tsx
    src/components/safety/confirm-dialog.tsx
  </files>
  <action>
    **safety/page.tsx (39 lines):**
    1. Standardise layout:
       - Replace `container mx-auto px-4` with `mx-auto max-w-7xl px-6 py-8 space-y-8`
       - Replace `bg-gray-50` (if any) with `bg-background`
       - Title: `text-2xl font-semibold tracking-tight text-foreground` (replace `text-2xl font-bold text-gray-900`)
       - Description: `text-sm text-muted-foreground` (replace `text-sm text-gray-500`)
    2. Replace all hardcoded colours
    3. Replace Lucide icons with Phosphor

    **safety-dashboard.tsx (62 lines):**
    1. Replace hardcoded colours
    2. Tabs: ensure Radix Tabs use semantic colours

    **backup-list.tsx (295 lines):**
    1. Replace ALL hardcoded colours:
       - List items: `bg-card border-border`
       - File size/date metadata: `text-muted-foreground`
       - Action buttons: appropriate Button variants
    2. Replace Lucide icons with Phosphor:
       - Download: `DownloadSimple`, Restore: `ArrowCounterClockwise`, Delete: `Trash`
    3. Replace `Loader2` with `<Spinner />`
    4. Empty state for no backups: use `<EmptyState />` component
       - Icon: `ShieldCheck` from Phosphor
       - Title: "No backups yet"
       - Description: "Backups are created automatically before destructive operations, or you can create one manually."
       - Action: onClick to create manual backup

    **operation-log-table.tsx (161 lines):**
    1. Replace hardcoded action badge colours with semantic tokens:
       - Red (delete): `bg-destructive/10 text-destructive`
       - Amber (merge/move): `bg-warning/10 text-warning`
       - Blue (restore): `bg-info/10 text-info`
       - Green (create): `bg-success/10 text-success`
    2. Table header: `bg-muted text-muted-foreground`
    3. Table rows: `bg-card`, alternate rows `bg-muted/30`
    4. Replace hardcoded colours for metadata text
    5. Replace any Lucide icons

    **pending-changes.tsx (79 lines):**
    1. Replace hardcoded colours
    2. Warning card: `bg-warning/10 text-warning border-warning/20`
    3. Replace Lucide icons (AlertTriangle -> Warning from Phosphor)

    **confirm-dialog.tsx (87 lines):**
    1. Replace hardcoded colours
    2. Dialog content: semantic colours (shadcn Dialog handles most of this)
    3. Warning text: semantic warning colours
    4. Destructive action: Button variant="destructive"
  </action>
  <verify>
    Run `npm run build`. Grep all 6 files for Lucide imports and hardcoded colours.
  </verify>
  <done>
    Safety page uses standardised layout. All 6 safety components use semantic colours and Phosphor icons. Operation log badges use semantic status colours. Empty state uses EmptyState component.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Sync page and all sync components</name>
  <files>
    src/app/sync/page.tsx
    src/app/sync/sync-page-client.tsx
    src/components/sync/sync-preview.tsx
    src/components/sync/sync-progress.tsx
    src/components/sync/sync-report.tsx
  </files>
  <action>
    **sync/page.tsx (46 lines):**
    1. Standardise layout:
       - Background: `bg-background`
       - Title: `text-2xl font-semibold tracking-tight text-foreground` (replace `text-2xl font-bold text-gray-900`)
       - Description: `text-sm text-muted-foreground` (replace `text-sm text-gray-500`)
    2. Replace hardcoded colours
    3. Replace Lucide icons with Phosphor

    **sync-page-client.tsx (200 lines):**
    1. Replace ALL hardcoded colours
    2. Replace Lucide icons with Phosphor
    3. Replace `Loader2` with `<Spinner />`
    4. Container: standardise to `mx-auto max-w-7xl px-6 py-8 space-y-8` or `max-w-4xl` for focused content

    **sync-preview.tsx (257 lines):**
    1. Replace ALL hardcoded colours:
       - Stage cards: `bg-card border-border`
       - Quota summary: warning styling with `bg-warning/10 text-warning`
       - Per-category breakdown: `text-foreground`, `text-muted-foreground`
       - Collapsible playlist lists: `bg-muted/50`
    2. Replace Lucide icons with Phosphor
    3. Watch Later deprecation notice: `bg-warning/10 text-warning`

    **sync-progress.tsx (491 lines):**
    1. Replace ALL hardcoded colours:
       - Stage pipeline indicators:
         - Completed: `text-success bg-success/10` with Check icon
         - Current: `text-info bg-info/10` with animated pulse
         - Future: `text-muted-foreground bg-muted`
       - Progress bar: `bg-primary`
       - Error count: `text-destructive`
       - Paused state: `bg-warning/10 text-warning`
    2. Replace Lucide icons with Phosphor:
       - CheckCircle -> CheckCircle
       - Pause -> Pause
       - Play -> Play
       - AlertTriangle -> Warning
    3. Replace `Loader2` with `<Spinner />`

    **sync-report.tsx (319 lines):**
    1. Replace ALL hardcoded colours:
       - Success stats: `text-success`
       - Error stats: `text-destructive`
       - Error table: `bg-card`, headers `bg-muted text-muted-foreground`
    2. Replace Lucide icons with Phosphor
    3. Completion status: success=`text-success`, partial=`text-warning`, failed=`text-destructive`
  </action>
  <verify>
    Run `npm run build`. Grep all 5 files for Lucide imports and hardcoded colours.
  </verify>
  <done>
    All 5 sync components use semantic colours and Phosphor icons. Sync stages use consistent semantic status colours. Progress and report views work correctly in dark mode.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Zero Lucide imports across all 11 files
3. Zero hardcoded colour classes across all 11 files
4. Safety page uses standardised layout
5. Sync page uses standardised layout
6. Operation log badges use semantic status colours
7. Sync stage indicators use semantic status colours
</verification>

<success_criteria>
Both Safety and Sync pages and all 11 components fully migrated to semantic colours and Phosphor icons. Standardised layouts applied. Status indicators use consistent semantic colour system. All work correctly in dark mode.
</success_criteria>

<output>
After completion, create `.planning/phases/12-ux-audit/12-09-SUMMARY.md`
</output>
