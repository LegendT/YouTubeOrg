---
phase: 12-ux-audit
plan: 10
type: execute
wave: 3
depends_on: ["12-02", "12-03", "12-04", "12-05", "12-06", "12-07", "12-08", "12-09"]
files_modified:
  - src/app/globals.css
  - src/components/navigation.tsx
  - src/components/analysis/analysis-dashboard.tsx
  - src/components/analysis/category-list.tsx
  - src/components/analysis/category-detail.tsx
  - src/components/videos/video-browse-page.tsx
  - src/components/videos/category-sidebar.tsx
  - src/components/videos/video-toolbar.tsx
  - src/components/ml-review/review-page.tsx
  - src/components/ml-review/review-card.tsx
  - src/components/ml-review/review-modal.tsx
  - src/components/safety/backup-list.tsx
  - src/components/safety/operation-log-table.tsx
  - src/components/sync/sync-preview.tsx
  - src/components/sync/sync-progress.tsx
  - src/app/dashboard/page.tsx
  - src/app/ml-categorisation/ml-categorisation-page.tsx
  - src/app/safety/page.tsx
  - src/app/sync/page.tsx
autonomous: true

must_haves:
  truths:
    - "All interactive elements have visible focus indicators meeting WCAG 2.2 SC 2.4.13"
    - "All interactive elements have appropriate ARIA labels"
    - "All images have alt text"
    - "Heading hierarchy is correct (h1 -> h2 -> h3, no skips) on every page"
    - "All buttons use shadcn Button component with appropriate variant"
    - "All form inputs have consistent styling (border, focus ring, placeholder)"
    - "Colour contrast meets WCAG AA (4.5:1 for text, 3:1 for large text) in both themes"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Global focus-visible styles meeting WCAG 2.2"
      contains: "focus-visible"
  key_links: []
---

<objective>
Comprehensive accessibility pass across all pages and components, plus button hierarchy and form input standardisation.

Purpose: WCAG 2.2 compliance is a locked decision from CONTEXT.md. This plan ensures all interactive elements are keyboard-accessible with visible focus indicators, proper ARIA attributes, and semantic HTML. It also standardises button variants and form input styling for visual consistency.

Output: All pages meet WCAG 2.2 accessibility standards. Consistent button hierarchy and form input styling across the app.
</objective>

<execution_context>
@/Users/anthonygeorge/.claude/get-shit-done/workflows/execute-plan.md
@/Users/anthonygeorge/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-ux-audit/12-RESEARCH.md
@.planning/phases/12-ux-audit/12-01-SUMMARY.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Global accessibility foundation and focus indicators</name>
  <files>
    src/app/globals.css
    src/components/navigation.tsx
    src/app/dashboard/page.tsx
    src/app/ml-categorisation/ml-categorisation-page.tsx
    src/app/safety/page.tsx
    src/app/sync/page.tsx
  </files>
  <action>
    1. In `src/app/globals.css`, verify and enhance the global focus-visible style:
       - The base layer already has `outline-ring/50` but verify it meets WCAG 2.2 SC 2.4.13:
         - Focus indicator must be at least 2px thick
         - Must have at least 3:1 contrast ratio against adjacent colours
       - Add or update:
         ```css
         @layer base {
           *:focus-visible {
             outline: 2px solid var(--ring);
             outline-offset: 2px;
           }
         }
         ```
       - Ensure this doesn't conflict with existing outline rules

    2. Audit and fix heading hierarchy across all pages:
       - Each page should have exactly one h1 (the page title)
       - Sections use h2, subsections h3 — no skipping levels
       - Check: dashboard, analysis, videos, ml-categorisation, ml-review, safety, sync
       - Fix any h3 that should be h2, or h1 that should be h2

    3. Add ARIA labels to navigation:
       - `<nav aria-label="Main navigation">`
       - Sign out button: `aria-label="Sign out"`
       - Theme toggle: already has aria-label from Plan 01

    4. Audit each page's server component wrapper for:
       - `<main>` tag with appropriate `role="main"` (implicit in HTML5 but explicit is safer)
       - Page title in document — already handled by Next.js metadata

    5. Add `aria-label` to key interactive regions across pages:
       - Dashboard: stats grid `aria-label="Playlist statistics"`
       - Safety: tabs `aria-label="Safety management"`
       - Sync: preview/progress sections with descriptive labels

    6. All thumbnail images: ensure `alt` attributes are present and meaningful:
       - Video thumbnails: `alt="{video title} thumbnail"` or `alt=""` if decorative (with title displayed elsewhere)
       - Logo: `alt="YouTube Organiser"`
  </action>
  <verify>
    Run `npm run build`. Search for focus-visible in globals.css. Count aria-label occurrences across all page files (should be significantly more than the current 16).
  </verify>
  <done>
    Global focus-visible style meets WCAG 2.2. All pages have correct heading hierarchy. Navigation has ARIA labels. Key interactive regions have descriptive ARIA labels. Thumbnail images have alt text.
  </done>
</task>

<task type="auto">
  <name>Task 2: Button hierarchy standardisation</name>
  <files>
    src/components/analysis/analysis-dashboard.tsx
    src/components/analysis/category-list.tsx
    src/components/analysis/category-detail.tsx
    src/components/videos/video-browse-page.tsx
    src/components/ml-review/review-page.tsx
    src/components/ml-review/review-modal.tsx
    src/components/safety/backup-list.tsx
    src/components/sync/sync-preview.tsx
    src/components/sync/sync-progress.tsx
  </files>
  <action>
    Audit all interactive elements across the app and standardise to shadcn Button hierarchy:

    1. **Find and replace raw `<button>` elements** with `<Button>` from `@/components/ui/button`:
       - Search all component files for `<button` (raw HTML button)
       - Replace with appropriate `<Button variant="...">`:
         - Primary actions (Start Sync, Run Analysis, Save): `variant="default"`
         - Supporting actions (Export, Refresh, Cancel): `variant="secondary"` or `variant="outline"`
         - Inline/icon-only actions: `variant="ghost"` with `size="icon"`
         - Destructive actions (Delete, Remove): `variant="destructive"`
         - Navigation-style text: `variant="link"`

    2. **Standardise button sizes:**
       - Default: `size="default"` (h-9 px-4 py-2)
       - Small (in toolbars, compact areas): `size="sm"` (h-8 px-3)
       - Icon-only: `size="icon"` (h-9 w-9)

    3. **Standardise loading states in buttons:**
       - When button is loading: `disabled` + Spinner inside button
       - Pattern: `<Button disabled={isPending}>{isPending ? <Spinner size={16} /> : null}{label}</Button>`

    4. **Fix any raw `<a>` tags used as buttons** (not navigation links):
       - If it triggers an action: replace with `<Button>`
       - If it navigates: replace with `<Link>` + `<Button variant="link">` or keep as styled Link

    5. **Apply consistent disabled states:**
       - Disabled buttons: `opacity-50 cursor-not-allowed` (shadcn Button handles this automatically)
  </action>
  <verify>
    Run `npm run build`. Search for raw `<button` tags across component files — ideally zero in primary component files (some may remain in shadcn primitives which is fine).
  </verify>
  <done>
    All interactive buttons use shadcn Button with appropriate variants. Consistent sizing (default, sm, icon). Loading states use Spinner inside disabled Button. No raw <button> elements in custom components.
  </done>
</task>

<task type="auto">
  <name>Task 3: Form input standardisation</name>
  <files>
    src/components/videos/video-toolbar.tsx
    src/components/analysis/category-list.tsx
    src/components/analysis/analysis-dashboard.tsx
    src/components/safety/operation-log-table.tsx
    src/components/sync/sync-preview.tsx
    src/components/ml-review/review-progress.tsx
  </files>
  <action>
    Standardise all form inputs (search bars, text inputs, selects, checkboxes) for consistent styling:

    1. **Search inputs** (video toolbar, category list filter, etc.):
       - Height: `h-9` (matching Button default height)
       - Border: `border border-input` (semantic)
       - Focus ring: `focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2`
       - Background: `bg-background`
       - Text: `text-foreground`
       - Placeholder: `placeholder:text-muted-foreground`
       - Rounded: `rounded-md`
       - Padding: `px-3 py-1.5`
       - Search icon: inside input with `text-muted-foreground`

    2. **Select dropdowns** (sort selectors, filter dropdowns):
       - Same height, border, focus ring as search inputs
       - If raw `<select>`, wrap in consistent styling class pattern
       - Consider if shadcn Select component is worth adding (may be for a later iteration)

    3. **Checkboxes** (batch selection):
       - Already using shadcn Checkbox — verify consistent sizing
       - Label text: `text-sm text-foreground`

    4. **Radio buttons / toggle groups** (algorithm mode, confidence filter):
       - Consistent active/inactive colours using semantic tokens
       - Active: `bg-primary text-primary-foreground` or `bg-accent text-accent-foreground`
       - Inactive: `bg-muted text-muted-foreground`
       - Hover: `hover:bg-accent/50`

    5. **Apply consistent `focus-visible` styling** to all inputs (the global CSS from Task 1 handles this, but verify it works with custom-styled inputs).
  </action>
  <verify>
    Run `npm run build`. Verify search inputs have consistent height (h-9) and focus-visible styling. Check that select dropdowns match input styling.
  </verify>
  <done>
    All form inputs (search, select, text, checkbox, radio) have consistent height, border, focus ring, and colour styling. Everything uses semantic colour tokens and works in dark mode.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Global focus-visible style exists in globals.css
3. ARIA labels on navigation, key regions, and interactive elements
4. All thumbnail images have alt text
5. Heading hierarchy correct (no h3 without h2, etc.)
6. Zero raw `<button>` elements in custom component files
7. Form inputs have consistent height and focus styling
</verification>

<success_criteria>
WCAG 2.2 accessibility standards met: visible focus indicators, ARIA labels, proper heading hierarchy, image alt text, 4.5:1 contrast ratio. Button hierarchy standardised with shadcn variants. Form inputs consistently styled. All work in both light and dark modes.
</success_criteria>

<output>
After completion, create `.planning/phases/12-ux-audit/12-10-SUMMARY.md`
</output>
