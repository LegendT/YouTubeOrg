---
phase: 10-ui-polish-code-quality
plan: 03
type: execute
wave: 2
depends_on: ["10-02"]
files_modified:
  - src/app/ml-categorisation/page.tsx
  - src/app/ml-categorisation/ml-categorisation-page.tsx
  - src/components/ml/categorisation-trigger.tsx
  - src/lib/ml/categorisation-engine.ts
  - src/app/actions/ml-categorisation.ts
  - src/middleware.ts
  - src/components/navigation.tsx
  - src/app/dashboard/page.tsx
  - src/app/ml-review/page.tsx
  - src/components/ml-review/review-page.tsx
  - src/app/actions/categories.ts
  - src/components/analysis/category-list.tsx
  - src/components/analysis/delete-category-dialog.tsx
  - src/lib/analysis/clustering.ts
  - src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "Route /ml-categorisation loads the ML categorisation page"
    - "All navigation links use /ml-categorisation URL"
    - "All user-facing strings use British English spelling"
    - "All code identifiers use British English spelling (categorise, categorised, categorisation, Uncategorised, recategorise)"
    - "All code comments use British English spelling"
    - "CSS/Tailwind 'color' tokens are NOT renamed"
  artifacts:
    - path: "src/app/ml-categorisation/page.tsx"
      provides: "ML categorisation page route (British spelling)"
    - path: "src/app/ml-categorisation/ml-categorisation-page.tsx"
      provides: "ML categorisation page component (British spelling)"
    - path: "src/components/ml/categorisation-trigger.tsx"
      provides: "Categorisation trigger component (British spelling)"
    - path: "src/lib/ml/categorisation-engine.ts"
      provides: "Categorisation engine (British spelling)"
    - path: "src/app/actions/ml-categorisation.ts"
      provides: "ML categorisation server actions (British spelling)"
  key_links:
    - from: "src/middleware.ts"
      to: "src/app/ml-categorisation/"
      via: "matcher pattern"
      pattern: "/ml-categorisation"
    - from: "src/components/navigation.tsx"
      to: "src/app/ml-categorisation/"
      via: "href"
      pattern: "href.*ml-categorisation"
    - from: "src/app/ml-categorisation/page.tsx"
      to: "src/app/ml-categorisation/ml-categorisation-page.tsx"
      via: "import"
      pattern: "import.*MLCategorisationPage"
    - from: "src/components/ml/categorisation-trigger.tsx"
      to: "src/app/actions/ml-categorisation.ts"
      via: "import"
      pattern: "import.*ml-categorisation"
---

<objective>
Rename all files, routes, identifiers, strings, and comments from American to British English spelling across the entire codebase. This covers the application layer -- route directories, file names, component names, function names, variable names, string literals, and code comments.

Purpose: Complete the British English consistency sweep. After Plan 02 handled the database layer, this plan handles everything above it.
Output: All files, routes, identifiers, and strings use British English. No American English spellings remain for project-domain terms.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-ui-polish-code-quality/10-CONTEXT.md
@.planning/phases/10-ui-polish-code-quality/10-RESEARCH.md
@.planning/phases/10-ui-polish-code-quality/10-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename route directory and files</name>
  <files>
    src/app/ml-categorisation/page.tsx
    src/app/ml-categorisation/ml-categorisation-page.tsx
    src/components/ml/categorisation-trigger.tsx
    src/lib/ml/categorisation-engine.ts
    src/app/actions/ml-categorisation.ts
  </files>
  <action>
    1. Rename the route directory:
       `mv src/app/ml-categorization src/app/ml-categorisation`

    2. Rename files inside the route:
       `mv src/app/ml-categorisation/ml-categorization-page.tsx src/app/ml-categorisation/ml-categorisation-page.tsx`

    3. Rename component file:
       `mv src/components/ml/categorization-trigger.tsx src/components/ml/categorisation-trigger.tsx`

    4. Rename engine file:
       `mv src/lib/ml/categorization-engine.ts src/lib/ml/categorisation-engine.ts`

    5. Rename action file:
       `mv src/app/actions/ml-categorization.ts src/app/actions/ml-categorisation.ts`

    6. Update src/app/ml-categorisation/page.tsx:
       - Fix import: `'./ml-categorization-page'` -> `'./ml-categorisation-page'`
       - Rename component: `MLCategorizationPage` -> `MLCategorisationPage`

    7. Update src/app/ml-categorisation/ml-categorisation-page.tsx:
       - Rename exported component: `MLCategorizationPage` -> `MLCategorisationPage`
       - Update import path: `'@/app/actions/ml-categorization'` -> `'@/app/actions/ml-categorisation'`
       - Update import path: `'@/components/ml/categorization-trigger'` -> `'@/components/ml/categorisation-trigger'`
       - Update import path: `'@/lib/ml/categorization-engine'` -> `'@/lib/ml/categorisation-engine'`
       - Rename all identifiers: categorization -> categorisation, categorize -> categorise, categorized -> categorised, Uncategorized -> Uncategorised, recategorize -> recategorise
       - Update all comments and strings with same spelling changes

    8. Update src/components/ml/categorisation-trigger.tsx:
       - Update import: `'@/app/actions/ml-categorization'` -> `'@/app/actions/ml-categorisation'`
       - Rename component: `CategorizationTrigger` -> `CategorisationTrigger`
       - Rename all internal identifiers: categorization -> categorisation, categorize -> categorise

    9. Update src/lib/ml/categorisation-engine.ts:
       - Rename class: `MLCategorizationEngine` -> `MLCategorisationEngine`
       - Rename all methods/variables: categorize -> categorise, categorization -> categorisation
       - Update comments

    10. Update src/app/actions/ml-categorisation.ts:
        - Rename all exported functions: runMLCategorization -> runMLCategorisation, getMLCategorizationForVideo -> getMLCategorisationForVideo, getMLCategorizationResults -> getMLCategorisationResults, etc.
        - All function names: getDataForCategorization -> getDataForCategorisation, saveCategorizationResults -> saveCategorisationResults
        - Rename all internal identifiers
        - Update all comments and strings
        - The import for mlCategorisations was already updated in Plan 02
  </action>
  <verify>
    - `ls src/app/ml-categorization` fails (directory no longer exists)
    - `ls src/app/ml-categorisation/page.tsx src/app/ml-categorisation/ml-categorisation-page.tsx` succeeds
    - `ls src/components/ml/categorisation-trigger.tsx src/lib/ml/categorisation-engine.ts src/app/actions/ml-categorisation.ts` succeeds
    - `grep -rn "categorization" src/app/ml-categorisation/ src/components/ml/categorisation-trigger.tsx src/lib/ml/categorisation-engine.ts src/app/actions/ml-categorisation.ts` returns zero matches
  </verify>
  <done>
    - Route directory renamed to /ml-categorisation
    - All 4 files renamed with British spelling
    - All exports, imports, and identifiers within renamed files use British spelling
  </done>
</task>

<task type="auto">
  <name>Task 2: Update all remaining files with British English identifiers and strings</name>
  <files>
    src/middleware.ts
    src/components/navigation.tsx
    src/app/dashboard/page.tsx
    src/app/ml-review/page.tsx
    src/components/ml-review/review-page.tsx
    src/app/actions/categories.ts
    src/components/analysis/category-list.tsx
    src/components/analysis/delete-category-dialog.tsx
    src/lib/analysis/clustering.ts
    src/app/page.tsx
  </files>
  <action>
    Update every remaining file that references American English spellings. For each file, apply ALL of these substitutions where they appear:

    **Import path changes:**
    - `'@/app/actions/ml-categorization'` -> `'@/app/actions/ml-categorisation'`
    - `'@/components/ml/categorization-trigger'` -> `'@/components/ml/categorisation-trigger'`
    - `'@/lib/ml/categorization-engine'` -> `'@/lib/ml/categorisation-engine'`

    **URL/route changes:**
    - `'/ml-categorization'` -> `'/ml-categorisation'` (in hrefs, links, middleware matcher)
    - `"/ml-categorization/:path*"` -> `"/ml-categorisation/:path*"` (middleware matcher)

    **Identifier renames:**
    - `categorize` -> `categorise` (function names, variable names)
    - `categorized` -> `categorised` (variable names)
    - `categorization` -> `categorisation` (all contexts)
    - `Categorization` -> `Categorisation` (type names, component names)
    - `Uncategorized` -> `Uncategorised` (string literals, comments)
    - `recategorize` -> `recategorise` (function names)
    - `Recategorize` -> `Recategorise` (component/type names)
    - `recategorization` -> `recategorisation`
    - `Organizer` -> `Organiser` (UI text on landing page -- src/app/page.tsx)

    **Comment/string changes:**
    - `"Denormalized"` -> `"Denormalised"` (in comments)
    - All occurrences of "categorize", "categorized", "categorization", "uncategorized", "recategorize" in comments

    **File-by-file specifics:**

    1. src/middleware.ts: Update matcher pattern from `"/ml-categorization/:path*"` to `"/ml-categorisation/:path*"`

    2. src/components/navigation.tsx: Update href from `'/ml-categorization'` to `'/ml-categorisation'`

    3. src/app/dashboard/page.tsx: Update href from `'/ml-categorization'` to `'/ml-categorisation'`

    4. src/app/ml-review/page.tsx:
       - Update import from `'@/app/actions/ml-categorization'` to `'@/app/actions/ml-categorisation'`
       - Update link href from `"/ml-categorization"` to `"/ml-categorisation"`
       - Rename any imported function references (getReviewData, getReviewStats names stay the same -- they don't contain "categorization")

    5. src/components/ml-review/review-page.tsx:
       - Update import from `'@/app/actions/ml-categorization'` to `'@/app/actions/ml-categorisation'`
       - Rename all function references: recategorizeVideo -> recategoriseVideo, etc.
       - Update all comments and strings

    6. src/app/actions/categories.ts:
       - Update string literals: `'Uncategorized'` -> `'Uncategorised'`
       - Update any comments referencing "uncategorized" or "categorization"

    7. src/components/analysis/category-list.tsx:
       - Update any `'Uncategorized'` string references
       - Update comments

    8. src/components/analysis/delete-category-dialog.tsx:
       - Update any `'Uncategorized'` string references
       - Update comments

    9. src/lib/analysis/clustering.ts:
       - Update comments mentioning "categorization" or "Uncategorized"

    10. src/app/page.tsx:
        - Update `"Organizer"` -> `"Organiser"` in UI text (landing page)
        - Update any other American spellings in strings/comments

    **CRITICAL: DO NOT rename any of these:**
    - CSS/Tailwind `color` references (e.g., `text-blue-600`, `bg-green-50`, `backgroundColor`)
    - CSS custom properties
    - HTML attributes (e.g., `color`)
    - Web platform API names
    - Third-party library identifiers

    After all changes, run a comprehensive grep to catch any remaining American spellings:
    - `grep -rn "categorization\|categorize\b\|Uncategorized\|Organizer" src/` should return zero matches
    - Exclude false positives from node_modules, .next, etc.
  </action>
  <verify>
    - `npx tsc --noEmit` compiles with zero errors
    - `grep -rn "categorization\|categorize\b\|categorized\b\|Uncategorized\|Organizer\|recategorize" src/` returns zero matches
    - `grep -rn "ml-categorization" src/` returns zero matches
    - Dev server starts without errors
    - Navigating to /ml-categorisation loads the ML page
    - All navigation links point to /ml-categorisation
  </verify>
  <done>
    - All 10+ files updated with British English identifiers, strings, and comments
    - Middleware matcher uses /ml-categorisation
    - Navigation, dashboard, and review page link to /ml-categorisation
    - Zero American English spellings remain for project-domain terms
    - CSS/Tailwind "color" tokens left untouched
    - TypeScript compiles cleanly
  </done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors
- `grep -rn "categorization\|categorize\b\|categorized\b\|Uncategorized\|Organizer\|recategorize\b" src/` returns zero matches
- `grep -rn "ml-categorization" src/` returns zero matches
- Dev server starts and all pages load correctly
- /ml-categorisation route works
- British English used consistently in all UI text, code comments, and identifiers
</verification>

<success_criteria>
1. Route /ml-categorisation works (old /ml-categorization directory removed)
2. All navigation links updated to /ml-categorisation
3. All user-facing strings use British English
4. All code identifiers use British English (categorise, categorised, categorisation, Uncategorised, Organiser, recategorise)
5. All code comments use British English
6. CSS/Tailwind "color" tokens NOT renamed
7. TypeScript compiles with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/10-ui-polish-code-quality/10-03-SUMMARY.md`
</output>
